package com.moneymanager.controller;

import org.springframework.web.bind.annotation.*;
import java.util.*;

@RestController
@RequestMapping("/api")
@CrossOrigin(origins = "http://localhost:3000")
public class SimpleController {
    
    @GetMapping("/test")
    public String test() {
        return "Money Manager API is working!";
    }
    
    @GetMapping("/dashboard/stats")
    public Map<String, Object> getDashboardStats() {
        Map<String, Object> stats = new HashMap<>();
        stats.put("totalIncome", 5842.50);
        stats.put("totalExpenses", 3215.80);
        stats.put("currentBalance", 12450.30);
        stats.put("monthlySavings", 1250.75);
        stats.put("incomeChange", "+12%");
        stats.put("expenseChange", "-5%");
        stats.put("savingsPercentage", "65%");
        return stats;
    }
    
    @GetMapping("/transactions")
    public List<Map<String, Object>> getTransactions() {
        List<Map<String, Object>> transactions = new ArrayList<>();
        
        // Sample transactions
        transactions.add(createTransaction(1L, "Amazon Purchase Online Shopping", "Shopping", "2023-10-12", -89.99, "EXPENSE"));
        transactions.add(createTransaction(2L, "Monthly Salary Company Inc.", "Income", "2023-10-10", 3500.00, "INCOME"));
        transactions.add(createTransaction(3L, "Restaurant Dinner Italian Blanco", "Food & Dining", "2023-10-08", -67.50, "EXPENSE"));
        transactions.add(createTransaction(4L, "Gas Station Fuel", "Transportation", "2023-10-05", -45.20, "EXPENSE"));
        transactions.add(createTransaction(5L, "Internet Bill Monthly Subscription", "Bills & Utilities", "2023-10-03", -79.99, "EXPENSE"));
        transactions.add(createTransaction(6L, "Freelance Project Payment", "Income", "2023-10-01", 1200.00, "INCOME"));
        transactions.add(createTransaction(7L, "Grocery Shopping", "Food & Dining", "2023-09-28", -120.50, "EXPENSE"));
        
        return transactions;
    }
    
    @GetMapping("/budgets")
    public List<Map<String, Object>> getBudgets() {
        List<Map<String, Object>> budgets = new ArrayList<>();
        
        budgets.add(createBudget(1L, "Food & Dining", 600.00, 450.00, 150.00, 75));
        budgets.add(createBudget(2L, "Transportation", 300.00, 120.00, 180.00, 40));
        budgets.add(createBudget(3L, "Shopping", 300.00, 270.00, 30.00, 90));
        budgets.add(createBudget(4L, "Bills & Utilities", 500.00, 300.00, 200.00, 60));
        
        return budgets;
    }
    
    private Map<String, Object> createTransaction(Long id, String description, String category, 
                                                  String date, Double amount, String type) {
        Map<String, Object> transaction = new HashMap<>();
        transaction.put("id", id);
        transaction.put("description", description);
        transaction.put("category", category);
        transaction.put("date", date);
        transaction.put("amount", amount);
        transaction.put("type", type);
        return transaction;
    }
    
    private Map<String, Object> createBudget(Long id, String category, Double allocatedAmount, 
                                            Double spentAmount, Double remainingAmount, Integer percentageSpent) {
        Map<String, Object> budget = new HashMap<>();
        budget.put("id", id);
        budget.put("category", category);
        budget.put("allocatedAmount", allocatedAmount);
        budget.put("spentAmount", spentAmount);
        budget.put("remainingAmount", remainingAmount);
        budget.put("percentageSpent", percentageSpent);
        return budget;
    }
}
